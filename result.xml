<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="6" time="2.109" timestamp="2026-02-11T22:53:13.632919-03:00" hostname="NBLINK08"><testcase classname="tests.test_tasks" name="test_list_tasks_empty" time="0.033"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BAB38D810&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD5D33620&gt;
db_session = &lt;sqlalchemy.orm.session.Session object at 0x0000026BD5D32510&gt;

    def test_list_tasks_empty(client: TestClient, db_session: Session):
&gt;       response = client.get("/tasks/")
                   ^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:8: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:290: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\concurrency.py:38: in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:2485: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:976: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:766: in sync_wrapper
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:34: in list_tasks
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BAB38D810&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase><testcase classname="tests.test_tasks" name="test_list_tasks_with_data" time="0.020"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5E6E650&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD5E1B9D0&gt;
db_session = &lt;sqlalchemy.orm.session.Session object at 0x0000026BD5E18F50&gt;

    def test_list_tasks_with_data(client: TestClient, db_session: Session):
        # Get the mock API key created in conftest
        api_key = db_session.query(GlobalApiKey).first()
    
        # Create a task linked to this API key
        task_uuid = str(uuid.uuid4())
        task_params = {"api_key_id": api_key.id, "some_param": "test"}
    
        task = Task(
            uuid=task_uuid,
            status="completed",
            task_type="transcription",
            file_name="test_audio.mp3",
            language="es",
            audio_duration=120.5,
            task_params=task_params
        )
        db_session.add(task)
        db_session.commit()
    
&gt;       response = client.get("/tasks/")
                   ^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:34: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:290: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\concurrency.py:38: in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:2485: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:976: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:766: in sync_wrapper
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:34: in list_tasks
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5E6E650&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase><testcase classname="tests.test_tasks" name="test_get_task_detail" time="0.016"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5E6ED70&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD6AB6AD0&gt;
db_session = &lt;sqlalchemy.orm.session.Session object at 0x0000026BD5E1AD50&gt;

    def test_get_task_detail(client: TestClient, db_session: Session):
        api_key = db_session.query(GlobalApiKey).first()
        task_uuid = str(uuid.uuid4())
        task_params = {"api_key_id": api_key.id}
    
        task = Task(
            uuid=task_uuid,
            status="processing",
            task_type="transcription",
            file_name="detail_test.mp3",
            url="s3_path/detail_test.mp3",
            task_params=task_params
        )
        db_session.add(task)
        db_session.commit()
    
&gt;       response = client.get(f"/tasks/{task_uuid}")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:57: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:290: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\concurrency.py:38: in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:2485: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:976: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:766: in sync_wrapper
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:65: in get_task
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5E6ED70&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase><testcase classname="tests.test_tasks" name="test_get_task_not_found" time="0.014"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5F75E00&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD5E6FCE0&gt;

    def test_get_task_not_found(client: TestClient):
&gt;       response = client.get("/tasks/non-existent-uuid")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:65: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:290: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\concurrency.py:38: in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:2485: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:976: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:766: in sync_wrapper
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:65: in get_task
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD5F75E00&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase><testcase classname="tests.test_tasks" name="test_delete_task" time="0.015"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD64303E0&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD5F77360&gt;
db_session = &lt;sqlalchemy.orm.session.Session object at 0x0000026BD5F742B0&gt;

    def test_delete_task(client: TestClient, db_session: Session):
        api_key = db_session.query(GlobalApiKey).first()
        task_uuid = str(uuid.uuid4())
        task_params = {"api_key_id": api_key.id}
    
        task = Task(
            uuid=task_uuid,
            status="pending",
            task_params=task_params
        )
        db_session.add(task)
        db_session.commit()
    
        # Delete
&gt;       response = client.delete(f"/tasks/{task_uuid}")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:82: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:641: in delete
    return super().delete(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1251: in delete
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:290: in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\concurrency.py:38: in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\to_thread.py:56: in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:2485: in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\_backends\_asyncio.py:976: in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:766: in sync_wrapper
    response = func(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:148: in delete_task
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD64303E0&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase><testcase classname="tests.test_tasks" name="test_get_task_audio" time="0.016"><failure message="AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'">self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD64310F0&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
&gt;           return getattr(self.comparator, key)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           AttributeError: 'Comparator' object has no attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1517: AttributeError

The above exception was the direct cause of the following exception:

client = &lt;starlette.testclient.TestClient object at 0x0000026BD5E48950&gt;
db_session = &lt;sqlalchemy.orm.session.Session object at 0x0000026BD5E4AB10&gt;
mock_s3 = &lt;MagicMock id='2662172950016'&gt;

    def test_get_task_audio(client: TestClient, db_session: Session, mock_s3):
        api_key = db_session.query(GlobalApiKey).first()
        task_uuid = str(uuid.uuid4())
        task_params = {"api_key_id": api_key.id}
    
        task = Task(
            uuid=task_uuid,
            status="completed",
            file_name="audio.mp3",
            url="users/audio.mp3",
            task_params=task_params
        )
        db_session.add(task)
        db_session.commit()
    
&gt;       response = client.get(f"/tasks/{task_uuid}/audio")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\test_tasks.py:104: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\..\AppData\Roaming\Python\Python313\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\cors.py:85: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\contextlib.py:162: in __exit__
    self.gen.throw(value)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\middleware.py:136: in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:159: in call_next
    raise app_exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\base.py:144: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\middleware\exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\middleware\asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:736: in app
    await route.handle(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\routing.py:290: in handle
    await self.app(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:53: in wrapped_app
    raise exc
..\..\..\AppData\Roaming\Python\Python313\site-packages\starlette\_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:387: in app
    raw_response = await run_endpoint_function(
..\..\..\AppData\Roaming\Python\Python313\site-packages\fastapi\routing.py:288: in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\AppData\Roaming\Python\Python313\site-packages\slowapi\extension.py:734: in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
app\routers\tasks.py:102: in get_task_audio
    Task.task_params['api_key_id'].astext == str(api_key.id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;sqlalchemy.sql.elements.BinaryExpression object at 0x0000026BD64310F0&gt;
key = 'astext'

    def __getattr__(self, key: str) -&gt; Any:
        try:
            return getattr(self.comparator, key)
        except AttributeError as err:
&gt;           raise AttributeError(
                "Neither %r object nor %r object has an attribute %r"
                % (
                    type(self).__name__,
                    type(self.comparator).__name__,
                    key,
                )
            ) from err
E           AttributeError: Neither 'BinaryExpression' object nor 'Comparator' object has an attribute 'astext'

..\..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:1519: AttributeError</failure></testcase></testsuite></testsuites>